<div class="container mx-auto p-4 lg:p-8">
  <!-- Indicateur de chargement -->
  <div *ngIf="loading" class="text-center py-10">
    <p class="text-gray-600">Chargement de vos données...</p>
    <!-- Optionnel: vous pouvez ajouter une animation de chargement (spinner) ici -->
  </div>

  <!-- Affichage des données de l'utilisateur -->
  <div *ngIf="!loading && person" class="max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-8 border-b pb-4">
      <h1 class="text-3xl font-bold text-gray-800">Mon Espace Client</h1>
      <button (click)="logout()"
        class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center">
        <i class="fas fa-sign-out-alt mr-2"></i>
        <span>Déconnexion</span>
      </button>
    </div>

    <!-- Barre d'onglets -->
    <div class="border-b border-gray-200 mb-6">
      <nav class="-mb-px flex space-x-8" aria-label="Tabs">
        <button (click)="setView('donnees')"
          [ngClass]="activeView === 'donnees' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
          class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
          Mes Données
        </button>
        <button (click)="setView('assurances')"
          [ngClass]="activeView === 'assurances' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
          class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
          Assurances
        </button>
        <button (click)="setView('documents')"
          [ngClass]="activeView === 'documents' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
          class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
          Mes Documents
        </button>
        <button (click)="setView('paiements')"
          [ngClass]="activeView === 'paiements' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
          class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
          Mes Paiements
        </button>
      </nav>
    </div>

    <!-- Contenu des onglets -->
    <div>
      <!-- Onglet Mes Données -->
      <div *ngIf="activeView === 'donnees'">
        <div class="bg-white p-8 rounded-lg shadow-lg">
          <h2 class="text-2xl font-bold mb-6 text-gray-700">Mes Données Personnelles</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
            <!-- Prénom & Nom -->
            <div>
              <p class="text-sm font-medium text-gray-500">Nom complet</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.prenom }} {{ person.nom }}</p>
            </div>
            <!-- Email -->
            <div>
              <p class="text-sm font-medium text-gray-500">Adresse e-mail</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.email }}</p>
            </div>
            <!-- Téléphone -->
            <div>
              <p class="text-sm font-medium text-gray-500">Téléphone</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.telephone || 'Non renseigné' }}</p>
            </div>
            <!-- Date de naissance -->
            <div>
              <p class="text-sm font-medium text-gray-500">Date de naissance</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.date_naissance ? (person.date_naissance | date:'dd/MM/yyyy') : 'Non renseignée' }}</p>
            </div>
            <!-- Adresse -->
            <div class="md:col-span-2">
              <p class="text-sm font-medium text-gray-500">Adresse</p>
              <p class="text-lg font-semibold text-gray-900">
                {{ person.adresse || 'Non renseignée' }}<br>
                <span *ngIf="person.code_postal && person.ville">{{ person.code_postal }} {{ person.ville }}</span>
              </p>
            </div>
            <!-- Numéro de permis -->
            <div>
              <p class="text-sm font-medium text-gray-500">Numéro de permis</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.permis_numero || 'Non renseigné' }}</p>
            </div>
            <!-- Date du permis -->
            <div>
              <p class="text-sm font-medium text-gray-500">Date du permis</p>
              <p class="text-lg font-semibold text-gray-900">{{ person.permis_date ? (person.permis_date | date:'dd/MM/yyyy') : 'Non renseignée' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Onglet Assurances -->
      <div *ngIf="activeView === 'assurances'">
        <div class="bg-white p-8 rounded-lg shadow-lg">
          <h2 class="text-2xl font-bold mb-6 text-gray-700">Mes Assurances</h2>
          <p class="text-gray-500">Le contenu pour la gestion des assurances sera affiché ici.</p>
        </div>
      </div>

      <!-- Onglet Mes Documents -->
      <div *ngIf="activeView === 'documents'">
        <div class="bg-white p-8 rounded-lg shadow-lg">
          <h2 class="text-2xl font-bold mb-6 text-gray-700">Mes Documents</h2>
          <p class="text-gray-500">La liste de vos documents sera affichée ici.</p>
        </div>
      </div>

      <!-- Onglet Mes Paiements -->
      <div *ngIf="activeView === 'paiements'">
        <div class="bg-white p-8 rounded-lg shadow-lg">
          <h2 class="text-2xl font-bold mb-6 text-gray-700">Mes Paiements</h2>
          <p class="text-gray-500">L'historique de vos paiements sera affiché ici.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Cas où les données ne sont pas trouvées -->
  <div *ngIf="!loading && !person" class="text-center text-gray-500 bg-gray-50 p-8 rounded-lg shadow-md max-w-md mx-auto mt-10">
    <h2 class="text-xl font-bold mb-4 text-red-600">Erreur</h2>
    <p>Impossible de charger vos informations personnelles.</p>
    <p class="text-sm mt-2">Veuillez réessayer plus tard ou contacter le support si le problème persiste.</p>
    <button (click)="logout()" class="mt-6 px-6 py-2 bg-indigo-600 text-white font-medium rounded-md hover:bg-indigo-700">
      Se déconnecter
    </button>
  </div>
</div>
