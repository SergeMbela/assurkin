<div class="bg-white">
  <!-- Hero Section -->
  <div class="relative isolate bg-black px-6 pt-14 lg:px-8" id="hero">
    <div class="mx-auto max-w-7xl py-8 sm:py-12 lg:py-16">
      <div class="grid grid-cols-1 items-center gap-x-8 gap-y-16 lg:grid-cols-2">
        <!-- Colonne de gauche : Texte -->
        <div class="text-center lg:text-left animate-fade-in-up">
          <h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl animate-fade-in-up" style="animation-delay: 0.2s;">AssurKin, le partenaire de votre réussite professionnelle</h1>
          <p class="mt-6 text-lg leading-8 text-gray-300 animate-fade-in-up" style="animation-delay: 0.4s;">Parce que votre activité mérite une protection sans faille, nous concevons des solutions d'assurance sur-mesure pour les entreprises et les indépendants. Notre expertise nous permet d'identifier vos risques spécifiques pour vous garantir la couverture la plus robuste. Nous sécurisons votre outil de travail et vos responsabilités à chaque étape, vous offrant la réactivité indispensable à la continuité de votre business.</p>
          <div class="mt-10 flex items-center justify-center gap-x-6 lg:justify-start animate-fade-in-up" style="animation-delay: 0.6s;">
            <button (click)="scrollToForm()" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Souscrire</button>
           <!--  <button (click)="scrollToSection('services')" class="text-sm font-semibold leading-6 text-white">Découvrir nos services <span aria-hidden="true">→</span></butto -->n>
          </div>
        </div>
        <!-- Colonne de droite : Image -->
        <div class="flex justify-center lg:justify-end animate-fade-in" style="animation-delay: 0.8s;">
          <img src="https://fqopliwvpuiprdegxytz.supabase.co/storage/v1/object/sign/img_website/assukin.webp?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV81MmJmNDFiNC0yNGQ0LTQ3ZTktYmEzNi04YWZmY2NjMzEzNzIiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJpbWdfd2Vic2l0ZS9hc3N1a2luLndlYnAiLCJpYXQiOjE3NjMwMjAyMjYsImV4cCI6MjA3ODM4MDIyNn0.7YNFUpPItIygZoqlnw2CE-Elj9r-64kfppEpvelhMpA" alt="Équipe Assurkin" class="w-full max-w-xs rounded-xl shadow-xl ring-1 ring-gray-400/10 lg:max-w-md ">
        </div>
      </div>
    </div>
  </div>
<div class="container mx-auto p-6">
  <h1 class="text-2xl font-bold mb-6 text-gray-800">Demande d'informations</h1>

  <!-- Messages de feedback -->
  <div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    {{ errorMessage }}
  </div>

  <form id="company-form" [formGroup]="companyForm" (ngSubmit)="onSubmit()" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <!-- Nom -->
      <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="name">Nom de l'entreprise *</label>
        <input 
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
          [ngClass]="{'border-red-500': companyForm.get('name')?.invalid && companyForm.get('name')?.touched}"
          id="name" type="text" formControlName="name" placeholder="Ex: Ma Société">
        <p *ngIf="companyForm.get('name')?.invalid && companyForm.get('name')?.touched" class="text-red-500 text-xs italic mt-1">Le nom est requis.</p>
      </div>

      <!-- Forme Juridique -->
      <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="legal_form">Forme Juridique *</label>
        <select 
          class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
          [ngClass]="{'border-red-500': companyForm.get('legal_form')?.invalid && companyForm.get('legal_form')?.touched}"
          id="legal_form" formControlName="legal_form">
          <option value="">Sélectionner...</option>
          <option *ngFor="let form of legalForms" [value]="form">{{ form }}</option>
        </select>
        <p *ngIf="companyForm.get('legal_form')?.invalid && companyForm.get('legal_form')?.touched" class="text-red-500 text-xs italic mt-1">Requis.</p>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <!-- Numéro d'entreprise -->
      <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="enterprise_number">Numéro d'entreprise (BCE) *</label>
        <input 
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
          [ngClass]="{'border-red-500': companyForm.get('enterprise_number')?.invalid && companyForm.get('enterprise_number')?.touched}"
          id="enterprise_number" type="text" formControlName="enterprise_number" placeholder="0123456789">
        <p *ngIf="companyForm.get('enterprise_number')?.errors?.['required'] && companyForm.get('enterprise_number')?.touched" class="text-red-500 text-xs italic mt-1">Requis.</p>
        <p *ngIf="companyForm.get('enterprise_number')?.errors?.['minlength'] && companyForm.get('enterprise_number')?.touched" class="text-red-500 text-xs italic mt-1">Doit contenir 10 caractères.</p>
      </div>

      <!-- Numéro de TVA -->
      <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="vat_number">Numéro de TVA (Optionnel)</label>
        <input 
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
          [ngClass]="{'border-red-500': companyForm.get('vat_number')?.invalid && companyForm.get('vat_number')?.touched}"
          id="vat_number" type="text" formControlName="vat_number" placeholder="BE0123456789">
        <p *ngIf="companyForm.get('vat_number')?.hasError('pattern') && companyForm.get('vat_number')?.touched" class="text-red-500 text-xs italic mt-1">Doit commencer par 'BE'.</p>
        <p class="text-gray-500 text-xs italic mt-1">Si vide, sera généré automatiquement (BE + BCE).</p>
      </div>
    </div>

    <!-- Adresse -->
    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">Adresse *</label>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="md:col-span-2">
          <input 
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
            [ngClass]="{'border-red-500': companyForm.get('street')?.invalid && companyForm.get('street')?.touched}"
            type="text" formControlName="street" placeholder="Rue">
        </div>
        <div>
          <input 
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
            [ngClass]="{'border-red-500': companyForm.get('house_number')?.invalid && companyForm.get('house_number')?.touched}"
            type="text" formControlName="house_number" placeholder="Numéro">
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
      <div>
        <input 
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
          [ngClass]="{'border-red-500': companyForm.get('postal_code')?.invalid && companyForm.get('postal_code')?.touched}"
          type="text" formControlName="postal_code" placeholder="Code Postal">
      </div>
      <div class="md:col-span-2">
        <input 
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
          [ngClass]="{'border-red-500': companyForm.get('city')?.invalid && companyForm.get('city')?.touched}"
          type="text" formControlName="city" placeholder="Ville">
      </div>
    </div>

    <!-- Email -->
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email (Optionnel)</label>
      <input 
        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
        [ngClass]="{'border-red-500': companyForm.get('email')?.invalid && companyForm.get('email')?.touched}"
        id="email" type="email" formControlName="email" placeholder="contact@entreprise.be">
      <p *ngIf="companyForm.get('email')?.invalid && companyForm.get('email')?.touched" class="text-red-500 text-xs italic mt-1">Email invalide.</p>
    </div>

    <!-- Besoins en assurance -->
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2">Quels sont vos besoins ?</label>
      <div class="space-y-3 mt-2">
        <div class="relative flex items-start">
          <div class="flex h-6 items-center">
            <input id="has_car_policy" formControlName="has_car_policy" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
          </div>
          <div class="ml-3 text-sm leading-6">
            <label for="has_car_policy" class="font-medium text-gray-900">Politique de voitures de société</label>
            <p class="text-gray-500 text-xs">Cochez si votre entreprise possède ou gère une flotte de véhicules.</p>
          </div>
        </div>
        <div class="relative flex items-start">
          <div class="flex h-6 items-center">
            <input id="wants_auto_insurance" formControlName="wants_auto_insurance" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
          </div>
          <div class="ml-3 text-sm leading-6">
            <label for="wants_auto_insurance" class="font-medium text-gray-900">Assurance Flotte Auto</label>
          </div>
        </div>
        <div class="relative flex items-start">
          <div class="flex h-6 items-center">
            <input id="wants_home_insurance" formControlName="wants_home_insurance" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
          </div>
          <div class="ml-3 text-sm leading-6">
            <label for="wants_home_insurance" class="font-medium text-gray-900">Assurance Locaux Professionnels</label>
          </div>
        </div>
        <div class="relative flex items-start">
          <div class="flex h-6 items-center">
            <input id="wants_liability_insurance" formControlName="wants_liability_insurance" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
          </div>
          <div class="ml-3 text-sm leading-6">
            <label for="wants_liability_insurance" class="font-medium text-gray-900">Assurance RC Professionnelle</label>
          </div>
        </div>
      </div>
      <p *ngIf="companyForm.errors?.['requireAtLeastOne'] && companyForm.touched" class="text-red-500 text-xs italic mt-2">
        Veuillez sélectionner au moins un besoin en assurance.
      </p>
    </div>

    <div class="flex items-center justify-end">
      <button 
        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline disabled:opacity-50 transition-colors flex items-center" 
        type="submit"
        [disabled]="isSubmitting">
        <svg *ngIf="isSubmitting" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        {{ isSubmitting ? 'Enregistrement...' : 'Poster' }}
      </button>
    </div>
  </form>
    <!-- Messages de feedback -->
  <div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    {{ errorMessage }}
  </div>
</div>
