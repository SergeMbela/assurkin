<div *ngIf="formValue; else noData">
    <table class="min-w-full divide-y divide-gray-200">
        <!-- Preneur d'assurance -->
        <tbody *ngIf="formValue.preneurAssurance as preneur" class="bg-white divide-y divide-gray-200">
            <tr class="bg-gray-50">
                <th colspan="2" class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Preneur d'assurance</th>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50 w-1/3">Nom</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ preneur.lastName | uppercase }} {{ preneur.firstName | titlecase }}</td>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Date de naissance</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ preneur.date_naissance | date:'dd/MM/yyyy' }}</td>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Contact</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ preneur.email }} | {{ preneur.phone }}</td>
            </tr>
        </tbody>

        <!-- Bâtiment à assurer -->
        <tbody *ngIf="formValue.batiment as batiment" class="bg-white divide-y divide-gray-200 border-t-8 border-transparent">
            <tr class="bg-gray-50">
                <th colspan="2" class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Bâtiment à assurer</th>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Adresse</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ batiment.adresse }}, {{ batiment.codePostal }} {{ batiment.ville }}</td>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Type de maison</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ batiment.typeMaison }}</td>
            </tr>
        </tbody>

        <!-- Évaluation du risque -->
        <tbody *ngIf="formValue.evaluation as evaluation" class="bg-white divide-y divide-gray-200 border-t-8 border-transparent">
            <tr class="bg-gray-50">
                <th colspan="2" class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Évaluation</th>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Détails</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    <p *ngIf="evaluation.superficie">Superficie: {{ evaluation.superficie }} m²</p>
                    <p *ngIf="evaluation.nombrePieces">Nombre de pièces: {{ evaluation.nombrePieces }}</p>
                    <p *ngIf="evaluation.loyerMensuel">Loyer mensuel: {{ evaluation.loyerMensuel | currency:'EUR' }}</p>
                </td>
            </tr>
        </tbody>

        <!-- Garanties et contrat -->
        <tbody *ngIf="formValue.garantiesHabitation as garanties" class="bg-white divide-y divide-gray-200 border-t-8 border-transparent">
            <tr class="bg-gray-50">
                <th colspan="2" class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Garanties et contrat</th>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Garanties</td>
                <td class="px-6 py-4 text-sm text-gray-900">
                    <ul class="list-disc list-inside">
                        <li *ngIf="garanties.contenu">Contenu</li>
                        <li *ngIf="garanties.vol">Vol</li>
                        <li *ngIf="garanties.pertesIndirectes">Pertes indirectes</li>
                        <li *ngIf="garanties.protectionJuridique">Protection juridique</li>
                        <li *ngIf="garanties.assistance">Assistance</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700 bg-gray-50">Contrat</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    <p>Date d'effet: {{ garanties.dateEffet | date:'dd/MM/yyyy' }}</p>
                    <p>Compagnie: {{ getCompanyName(garanties.insuranceCompany) || 'Non spécifiée' }}</p>
                    <p>Statut: <span class="font-medium px-2.5 py-0.5 rounded-full text-xs" [ngClass]="getStatutClass(garanties.statut)">{{ garanties.statut || 'N/A' }}</span></p>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Template pour le cas où il n'y a pas de données -->
<ng-template #noData>
    <div class="text-center py-8 text-gray-500">
        <p>Les informations du devis ne sont pas disponibles.</p>
    </div>
</ng-template>
