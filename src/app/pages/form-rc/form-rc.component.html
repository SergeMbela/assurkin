<!-- Hero Section -->
<div class="relative isolate bg-black px-6 pt-14 lg:px-8" id="hero">
  <div class="mx-auto max-w-7xl py-8 sm:py-12 lg:py-16">
    <div class="grid grid-cols-1 items-center gap-x-8 gap-y-16 lg:grid-cols-2">
      <!-- Colonne de gauche : Texte -->
      <div class="text-center lg:text-left">
        <h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl">Assurance RC Familiale</h1>
        <p class="mt-6 text-lg leading-8 text-gray-300">Une assurance responsabilité civile familiale est indispensable pour protéger votre famille contre les conséquences financières d’un dommage causé involontairement à autrui. Elle couvre les blessures, les dégâts matériels ou les accidents impliquant les membres de votre foyer, y compris vos enfants et vos animaux. Sans cette protection, vous pourriez être tenu personnellement responsable et devoir assumer des frais importants. Cette assurance vous apporte donc tranquillité d’esprit et sécurité au quotidien.
Vivez chaque jour l’esprit tranquille, en sachant que vous êtes couvert en cas de coup dur.</p>
        <div class="mt-10 flex items-center justify-center gap-x-6 lg:justify-start">
          <button (click)="scrollToSection('content')" class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">Souscrire</button>          <a routerLink="/contact" class="text-sm font-semibold leading-6 text-white">Contact <span aria-hidden="true">→</span></a>
        </div>
      </div>
      <!-- Colonne de droite : Image -->
      <div class="flex justify-center lg:justify-end">
        <img src="https://fqopliwvpuiprdegxytz.supabase.co/storage/v1/object/sign/img_website/rc_familiale.webp?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV81MmJmNDFiNC0yNGQ0LTQ3ZTktYmEzNi04YWZmY2NjMzEzNzIiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJpbWdfd2Vic2l0ZS9yY19mYW1pbGlhbGUud2VicCIsImlhdCI6MTc2MzAyMzQwMSwiZXhwIjoyMDc4MzgzNDAxfQ.w2eMiS3pMEgBuRl4XvYmWoix82dzFQOppsfash1U4KQ" alt="Assurance" class="w-full max-w-xs rounded-xl shadow-xl ring-1 ring-gray-400/10 lg:max-w-md">
      </div>
    </div>
  </div>
</div>

<!-- Contenu de la page -->
<div id="content" class="container mx-auto p-4 py-16 sm:py-24">
  <div class="grid grid-cols-1 lg:grid-cols-2 lg:gap-12">
    <!-- Colonne de gauche pour le texte -->
    <div class="text-gray-700 prose lg:prose-lg max-w-none prose-h2:mb-4 prose-p:mt-4 prose-ul:mt-4">
      <h2 class="text-2xl font-bold">Assurance RC FAMILIALE</h2>
      <p>Lorsque vous ou vos proches causez des dommages accidentels à autrui ou à ses biens, que ce soit en blessant quelqu'un, en causant des dégâts matériels ou en provoquant un accident avec vos animaux domestiques, vous êtes légalement responsable. Pour couvrir ces incidents, la responsabilité civile familiale a été conçue. Cependant, il existe différentes options de couverture, alors il est important de choisir la formule qui convient le mieux à vos besoins.</p>

      <h3 class="text-xl font-bold mt-8">Qu’est-ce que la RC Familiale ?</h3>
      <p>L'assurance responsabilité civile vie privée, également connue sous le nom d'assurance RC familiale, couvre les dommages que vous ou votre famille pouvez causer à un tiers. Elle prend en charge les dégâts causés à autrui en dehors de votre cercle familial, que ce soit chez des amis, dans la rue, dans des lieux publics ou même lors de voyages. Cette assurance est essentielle dans un contexte juridique de plus en plus complexe.</p>

      <h3 class="text-xl font-bold mt-8">Qui est couvert par la responsabilité civile privée ?</h3>
      <p>La RC familiale vous protège vous et votre famille des dommages que vous causez involontairement à des tiers. Elle couvre :</p>
      <ul>
        <li>Toutes les personnes vivant sous le même toit ;</li>
        <li>Le personnel de service (baby-sitter, professeur particulier, femme de ménage, etc.) ;</li>
        <li>Les animaux de compagnie sous la responsabilité du titulaire.</li>
      </ul>

      <h3 class="text-xl font-bold mt-8">Quand faut-il avoir recours à sa RC Familiale ?</h3>
      <p>Pour pouvoir faire appel à la RC Familiale, certaines conditions doivent être remplies. Tout d’abord, votre responsabilité doit être impliquée dans le dommage causé. C’est la condition sine qua non. Précisons toutefois qu’il peut s’agir d’une action de votre part, mais aussi d’une négligence ou d’une imprudence. Ensuite, le dommage doit impérativement avoir été causé à un tiers dans un cadre privé. Enfin, il doit exister un lien de causalité entre la faute et le dommage.</p>
      <p><strong>Bon à savoir :</strong> la RC familiale ne peut être invoquée pour des dommages créés intentionnellement, causés à vous-même ou à votre famille, ou provoqués par votre animal s’il est catégorisé comme dangereux.</p>
    </div>

    <!-- Colonne de droite pour le formulaire -->
    <form id="form" [formGroup]="rcForm" (ngSubmit)="onSubmit()" class="space-y-12 bg-white p-8 rounded-lg shadow-md mt-8 lg:mt-0">

    <!-- Message de statut de soumission -->
    <div *ngIf="submissionStatus" class="p-4 mb-4 text-sm rounded-lg"
         [ngClass]="{'bg-green-100 text-green-800': submissionStatus.success, 'bg-red-100 text-red-800': !submissionStatus.success}"
         role="alert">
      {{ submissionStatus.message }}
    </div>

    <!-- Section Preneur d'Assurance -->
    <fieldset class="border-t pt-6">
      <legend class="text-xl font-semibold px-2 text-gray-700 mb-4">1. Informations sur le preneur</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div>
          <label for="preneur-nom" class="block text-sm font-medium text-gray-700">Nom</label>
          <input type="text" id="preneur-nom" formControlName="preneur_nom" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_nom')?.invalid && rcForm.get('preneur_nom')?.touched}">
        </div>
        <div>
          <label for="preneur-prenom" class="block text-sm font-medium text-gray-700">Prénom</label>
          <input type="text" id="preneur-prenom" formControlName="preneur_prenom" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_prenom')?.invalid && rcForm.get('preneur_prenom')?.touched}">
        </div>
        <div>
          <label for="preneur-genre" class="block text-sm font-medium text-gray-700">Genre</label>
          <select id="preneur-genre" formControlName="preneur_genre" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm">
            <option>Madame</option>
            <option>Monsieur</option>
            <option>Autre</option>
          </select>
        </div>
        <div>
          <label for="preneur-tel" class="block text-sm font-medium text-gray-700">Numéro de téléphone</label>
          <input type="tel" id="preneur-tel" formControlName="preneur_telephone" required appPhoneNumberFormat class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_telephone')?.invalid && rcForm.get('preneur_telephone')?.touched}">
        </div>
        <div>
          <label for="preneur-email" class="block text-sm font-medium text-gray-700">Email</label>
          <input type="email" id="preneur-email" formControlName="preneur_email" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_email')?.invalid && rcForm.get('preneur_email')?.touched}">
        </div>
        <div class="lg:col-span-2">
          <label for="preneur-adresse" class="block text-sm font-medium text-gray-700">Rue et numéro</label>
          <input type="text" id="preneur-adresse" formControlName="preneur_adresse" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_adresse')?.invalid && rcForm.get('preneur_adresse')?.touched}">
        </div>
        <div>
          <div class="relative">
            <label for="preneur-cp" class="block text-sm font-medium text-gray-700">Code Postal</label>
            <input type="text" id="preneur-cp" formControlName="preneur_code_postal" required autocomplete="off" (input)="onPostalCodeInput($event)" class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm" [ngClass]="{'ring-red-500': rcForm.get('preneur_code_postal')?.invalid && rcForm.get('preneur_code_postal')?.touched}">
            <div *ngIf="isLoading" class="absolute inset-y-0 right-0 flex items-center pr-3 top-6">
              <svg class="animate-spin h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
            </div>
            <ul *ngIf="filteredPostalCodes && filteredPostalCodes.length > 0" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto">
              <li *ngFor="let pc of filteredPostalCodes" (click)="selectPostalCode(pc)" class="px-3 py-2 cursor-pointer hover:bg-gray-100">
                {{ pc.postalCode }} - {{ pc.city }}
              </li>
            </ul>
          </div>
        </div>
        <div>
          <label for="ville" class="block text-sm font-medium text-gray-700">Ville</label>
          <select id="ville" formControlName="preneur_ville" required [disabled]="cities.length === 0" class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm disabled:bg-gray-100">
            <option *ngIf="cities.length === 0" value="">Sélectionner une ville</option>
            <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
          </select>
        </div>
      </div>
    </fieldset>

    <!-- Section Risque -->
    <fieldset class="border-t pt-6">
      <legend class="text-xl font-semibold px-2 text-gray-700 mb-4">2. Composition du risque</legend>
      <div class="space-y-2 sm:flex sm:items-center sm:space-y-0 sm:space-x-10">
        <div class="flex items-center">
          <input id="risque-famille" formControlName="risque" value="famille" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500">
          <label for="risque-famille" class="ml-3 block text-sm font-medium text-gray-700">Famille</label>
        </div>
        <div class="flex items-center">
          <input id="risque-isole" formControlName="risque" value="isole" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500">
          <label for="risque-isole" class="ml-3 block text-sm font-medium text-gray-700">Isolé</label>
        </div>
      </div>
    </fieldset>

    <!-- Section Date d'effet -->
    <fieldset class="border-t pt-6">
      <legend class="text-xl font-semibold px-2 text-gray-700 mb-4">3. Date d'effet</legend>
      <div>
        <label for="date-effet" class="block text-sm font-medium text-gray-700">Date d'effet souhaitée</label>
        <input type="date" id="date-effet" formControlName="date_effet" [min]="minDate" required class="mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 px-3 ring-1 ring-slate-200 shadow-sm md:w-1/2 lg:w-1/3">
      </div>
    </fieldset>

    <!-- Bouton de soumission -->
    <div class="pt-6">
      <!-- Message de statut de soumission (en bas) -->
      <div *ngIf="submissionStatus" class="p-4 mb-4 text-sm rounded-lg"
           [ngClass]="{'bg-green-100 text-green-800': submissionStatus.success, 'bg-red-100 text-red-800': !submissionStatus.success}"
           role="alert">
        {{ submissionStatus.message }}
      </div>
      <div class="flex justify-end">
        <button type="submit" [disabled]="!rcForm.valid" class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed">
        Recevoir mon offre
        </button>
      </div>
    </div>

    </form>
  </div>
</div>
