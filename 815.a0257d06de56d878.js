"use strict";(self.webpackChunkassurkin=self.webpackChunkassurkin||[]).push([[815],{8815:(X,c,d)=>{d.r(c),d.d(c,{ParamsComponent:()=>V});var e=d(4438),l=d(177),a=d(9417),g=d(9981),f=d(1807);function h(r,n){1&r&&(e.j41(0,"div",20),e.EFF(1," Le mot de passe est requis. "),e.k0s())}function _(r,n){1&r&&(e.j41(0,"div",20),e.EFF(1," Le mot de passe doit contenir au moins 6 caract\xe8res. "),e.k0s())}function b(r,n){1&r&&(e.j41(0,"div",20),e.EFF(1," La confirmation est requise. "),e.k0s())}function w(r,n){1&r&&(e.j41(0,"div",20),e.EFF(1," Les mots de passe ne correspondent pas. "),e.k0s())}function v(r){const n=r.get("password"),t=r.get("passwordConfirm");return n&&t&&n.value!==t.value?{passwordsMismatch:!0}:null}let x=(()=>{class r{userId=null;close=new e.bkB;save=new e.bkB;passwordForm;fb=(0,e.WQX)(a.ok);constructor(){this.passwordForm=this.fb.group({password:["",[a.k0.required,a.k0.minLength(6)]],passwordConfirm:["",[a.k0.required]]},{validators:v})}onCancel(){this.close.emit()}onSubmit(){this.passwordForm.valid&&this.userId?this.save.emit({userId:this.userId,password:this.passwordForm.value.password}):this.passwordForm.markAllAsTouched()}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-change-password-modal"]],inputs:{userId:"userId"},outputs:{close:"close",save:"save"},standalone:!0,features:[e.aNF],decls:30,vars:6,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],["id","modal-title",1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","shadow-sm","sm:text-sm","border-gray-300","rounded-md","border","p-2"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["for","passwordConfirm",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","passwordConfirm","formControlName","passwordConfirm","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","shadow-sm","sm:text-sm","border-gray-300","rounded-md","border","p-2"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-indigo-600","text-base","font-medium","text-white","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"text-red-500","text-xs","mt-1"]],template:function(s,o){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.bIt("click",function(){return o.onCancel()}),e.k0s(),e.j41(3,"span",3),e.EFF(4,"\u200b"),e.k0s(),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),e.EFF(10," Changer le mot de passe "),e.k0s(),e.j41(11,"div",9)(12,"form",10),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(13,"div",11)(14,"label",12),e.EFF(15,"Nouveau mot de passe"),e.k0s(),e.nrm(16,"input",13),e.DNE(17,h,2,0,"div",14)(18,_,2,0,"div",14),e.k0s(),e.j41(19,"div",11)(20,"label",15),e.EFF(21,"Confirmer le mot de passe"),e.k0s(),e.nrm(22,"input",16),e.DNE(23,b,2,0,"div",14)(24,w,2,0,"div",14),e.k0s()()()()()(),e.j41(25,"div",17)(26,"button",18),e.bIt("click",function(){return o.onSubmit()}),e.EFF(27," Enregistrer "),e.k0s(),e.j41(28,"button",19),e.bIt("click",function(){return o.onCancel()}),e.EFF(29," Annuler "),e.k0s()()()()()),2&s){let i,m,u,p;e.R7$(12),e.Y8G("formGroup",o.passwordForm),e.R7$(5),e.Y8G("ngIf",(null==(i=o.passwordForm.get("password"))?null:i.touched)&&(null==(i=o.passwordForm.get("password"))||null==i.errors?null:i.errors.required)),e.R7$(),e.Y8G("ngIf",(null==(m=o.passwordForm.get("password"))?null:m.touched)&&(null==(m=o.passwordForm.get("password"))||null==m.errors?null:m.errors.minlength)),e.R7$(5),e.Y8G("ngIf",(null==(u=o.passwordForm.get("passwordConfirm"))?null:u.touched)&&(null==(u=o.passwordForm.get("passwordConfirm"))||null==u.errors?null:u.errors.required)),e.R7$(),e.Y8G("ngIf",(null==o.passwordForm.errors?null:o.passwordForm.errors.passwordsMismatch)&&(null==(p=o.passwordForm.get("passwordConfirm"))?null:p.touched)),e.R7$(2),e.Y8G("disabled",o.passwordForm.invalid)}},dependencies:[l.MD,l.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD]})}return r})();const k=(r,n,t)=>({"bg-red-100":r,"bg-yellow-100":n,"bg-blue-100":t}),C=(r,n,t)=>({"bg-red-600 hover:bg-red-700 focus:ring-red-500":r,"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500":n,"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":t});function y(r,n){1&r&&(e.qSk(),e.j41(0,"svg",18),e.nrm(1,"path",19),e.k0s())}function F(r,n){1&r&&(e.qSk(),e.j41(0,"svg",20),e.nrm(1,"path",19),e.k0s())}function j(r,n){1&r&&(e.qSk(),e.j41(0,"svg",21),e.nrm(1,"path",22),e.k0s())}let P=(()=>{class r{title="Confirmation";message="\xcates-vous s\xfbr de vouloir effectuer cette action ?";confirmText="Confirmer";cancelText="Annuler";type="danger";confirm=new e.bkB;cancel=new e.bkB;onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-confirmation-modal"]],inputs:{title:"title",message:"message",confirmText:"confirmText",cancelText:"cancelText",type:"type"},outputs:{confirm:"confirm",cancel:"cancel"},standalone:!0,features:[e.aNF],decls:23,vars:17,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","sm:mx-0","sm:h-10","sm:w-10",3,"ngClass"],["class","h-6 w-6 text-red-600","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","h-6 w-6 text-yellow-600","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","h-6 w-6 text-blue-600","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"],["id","modal-title",1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"text-sm","text-gray-500"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","text-base","font-medium","text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","sm:ml-3","sm:w-auto","sm:text-sm",3,"click","ngClass"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-yellow-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.bIt("click",function(){return o.onCancel()}),e.k0s(),e.j41(3,"span",3),e.EFF(4,"\u200b"),e.k0s(),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),e.DNE(9,y,2,0,"svg",8)(10,F,2,0,"svg",9)(11,j,2,0,"svg",10),e.k0s(),e.j41(12,"div",11)(13,"h3",12),e.EFF(14),e.k0s(),e.j41(15,"div",13)(16,"p",14),e.EFF(17),e.k0s()()()()(),e.j41(18,"div",15)(19,"button",16),e.bIt("click",function(){return o.onConfirm()}),e.EFF(20),e.k0s(),e.j41(21,"button",17),e.bIt("click",function(){return o.onCancel()}),e.EFF(22),e.k0s()()()()()),2&s&&(e.R7$(8),e.Y8G("ngClass",e.sMw(9,k,"danger"===o.type,"warning"===o.type,"info"===o.type)),e.R7$(),e.Y8G("ngIf","danger"===o.type),e.R7$(),e.Y8G("ngIf","warning"===o.type),e.R7$(),e.Y8G("ngIf","info"===o.type),e.R7$(3),e.SpI(" ",o.title," "),e.R7$(3),e.SpI(" ",o.message," "),e.R7$(2),e.Y8G("ngClass",e.sMw(13,C,"danger"===o.type,"warning"===o.type,"info"===o.type)),e.R7$(),e.SpI(" ",o.confirmText," "),e.R7$(2),e.SpI(" ",o.cancelText," "))},dependencies:[l.MD,l.YU,l.bT]})}return r})();function E(r,n){if(1&r){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.setActiveTab(o))}),e.EFF(1),e.k0s()}if(2&r){const t=n.$implicit,s=e.XpG();e.Y8G("ngClass",s.activeTab===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),e.R7$(),e.SpI(" ",s.tabLabels[t]," ")}}function T(r,n){1&r&&(e.j41(0,"div",17),e.nrm(1,"div",18),e.j41(2,"span",19),e.EFF(3,"Chargement..."),e.k0s()())}function I(r,n){if(1&r&&(e.j41(0,"div",20)(1,"strong",21),e.EFF(2,"Erreur!"),e.k0s(),e.j41(3,"span",22),e.EFF(4),e.k0s()()),2&r){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.error,"")}}function R(r,n){if(1&r&&(e.j41(0,"tr",28)(1,"td",29)(2,"p",30),e.EFF(3),e.k0s()(),e.j41(4,"td",29)(5,"p",30),e.EFF(6),e.k0s()(),e.j41(7,"td",29)(8,"p",30),e.EFF(9),e.k0s()(),e.j41(10,"td",29)(11,"p",30),e.EFF(12),e.k0s()(),e.j41(13,"td",29)(14,"code",31),e.EFF(15),e.k0s()()()),2&r){const t=n.$implicit;e.R7$(3),e.JRh(t.id),e.R7$(3),e.JRh(t.prenom),e.R7$(3),e.JRh(t.nom),e.R7$(3),e.JRh(t.email),e.R7$(3),e.JRh(t.user_id)}}function M(r,n){1&r&&(e.j41(0,"tr")(1,"td",32),e.EFF(2," Aucun utilisateur trouv\xe9. "),e.k0s()())}function G(r,n){if(1&r&&(e.j41(0,"div",23)(1,"div",24)(2,"table",25)(3,"thead")(4,"tr")(5,"th",26),e.EFF(6," ID "),e.k0s(),e.j41(7,"th",26),e.EFF(8," Pr\xe9nom "),e.k0s(),e.j41(9,"th",26),e.EFF(10," Nom "),e.k0s(),e.j41(11,"th",26),e.EFF(12," Email "),e.k0s(),e.j41(13,"th",26),e.EFF(14," User ID "),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,R,16,5,"tr",27)(17,M,3,0,"tr",8),e.k0s()()()()),2&r){const t=e.XpG(2);e.R7$(16),e.Y8G("ngForOf",t.filteredPeople),e.R7$(),e.Y8G("ngIf",0===t.filteredPeople.length)}}function $(r,n){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",12)(2,"input",13),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.searchTerm,o)||(i.searchTerm=o),e.Njj(o)}),e.bIt("input",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.filterPeople())}),e.k0s()(),e.DNE(3,T,4,0,"div",14)(4,I,5,1,"div",15)(5,G,18,2,"div",16),e.k0s()}if(2&r){const t=e.XpG();e.R7$(2),e.R50("ngModel",t.searchTerm),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("ngIf",!t.loading&&!t.error)}}function A(r,n){1&r&&(e.j41(0,"div")(1,"div",33),e.EFF(2," Contenu Corporate \xe0 venir... "),e.k0s()())}function U(r,n){if(1&r&&(e.j41(0,"span",44),e.nrm(1,"span",45),e.j41(2,"span",46),e.EFF(3),e.k0s()()),2&r){const t=n.$implicit;e.R7$(3),e.JRh(t)}}function D(r,n){if(1&r){const t=e.RV6();e.j41(0,"tr",28)(1,"td",29)(2,"p",40),e.EFF(3),e.k0s()(),e.j41(4,"td",29)(5,"p",30),e.EFF(6),e.k0s()(),e.j41(7,"td",29)(8,"p",30),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.j41(11,"td",29)(12,"p",30),e.EFF(13),e.nI1(14,"date"),e.k0s()(),e.j41(15,"td",29),e.DNE(16,U,4,1,"span",41),e.k0s(),e.j41(17,"td",29)(18,"button",42),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.changePassword(o.id))}),e.EFF(19," Changer MDP "),e.k0s(),e.j41(20,"button",43),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.deleteUser(o.id))}),e.EFF(21," Supprimer "),e.k0s()()()}if(2&r){const t=n.$implicit;e.R7$(2),e.FS9("title",t.id),e.R7$(),e.SpI("",t.id.substring(0,8),"..."),e.R7$(3),e.JRh(t.email),e.R7$(3),e.JRh(e.i5U(10,6,t.last_sign_in_at,"dd/MM/yyyy HH:mm")),e.R7$(4),e.JRh(e.i5U(14,9,t.created_at,"dd/MM/yyyy")),e.R7$(3),e.Y8G("ngForOf",t.providers)}}function B(r,n){1&r&&(e.j41(0,"tr")(1,"td",32),e.EFF(2," Aucun utilisateur authentifi\xe9 trouv\xe9. "),e.k0s()())}function S(r,n){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",12)(2,"input",34),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.searchAuthTerm,o)||(i.searchAuthTerm=o),e.Njj(o)}),e.bIt("input",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.filterAuthUsers())}),e.k0s()(),e.j41(3,"div",23)(4,"div",24)(5,"table",25)(6,"thead")(7,"tr")(8,"th",26),e.EFF(9,"ID (Auth)"),e.k0s(),e.j41(10,"th",26),e.EFF(11,"Email"),e.k0s(),e.j41(12,"th",26),e.EFF(13,"Derni\xe8re connexion"),e.k0s(),e.j41(14,"th",26),e.EFF(15,"Cr\xe9\xe9 le"),e.k0s(),e.j41(16,"th",26),e.EFF(17,"Providers"),e.k0s(),e.j41(18,"th",26),e.EFF(19,"Actions"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,D,22,12,"tr",27)(22,B,3,0,"tr",8),e.k0s()(),e.j41(23,"div",35)(24,"span",36),e.EFF(25),e.k0s(),e.j41(26,"div",37)(27,"button",38),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changePage(-1))}),e.EFF(28," Pr\xe9c\xe9dent "),e.k0s(),e.j41(29,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changePage(1))}),e.EFF(30," Suivant "),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.R50("ngModel",t.searchAuthTerm),e.R7$(19),e.Y8G("ngForOf",t.paginatedAuthUsers),e.R7$(),e.Y8G("ngIf",0===t.filteredAuthUsers.length),e.R7$(3),e.Lme(" Page ",t.currentPage," sur ",t.totalPages," "),e.R7$(2),e.Y8G("disabled",1===t.currentPage),e.R7$(2),e.Y8G("disabled",t.currentPage===t.totalPages)}}function Y(r,n){if(1&r){const t=e.RV6();e.j41(0,"app-change-password-modal",47),e.bIt("close",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onPasswordModalClose())})("save",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onPasswordModalSave(o))}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("userId",t.selectedUserId)}}function N(r,n){if(1&r){const t=e.RV6();e.j41(0,"app-confirmation-modal",48),e.bIt("confirm",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onDeleteConfirm())})("cancel",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onDeleteCancel())}),e.k0s()}}let V=(()=>{class r{dbService=(0,e.WQX)(f.y);tabs=["clients","corporate","autres"];tabLabels={clients:"Clients",corporate:"Corporate",autres:"Autres"};activeTab="clients";peopleWithAccounts=[];filteredPeople=[];authUsers=[];filteredAuthUsers=[];searchAuthTerm="";searchTerm="";loading=!0;error=null;currentPage=1;itemsPerPage=10;showPasswordModal=!1;selectedUserId=null;showDeleteModal=!1;userToDeleteId=null;ngOnInit(){this.loadPeople(),this.loadAuthUsers()}setActiveTab(t){this.activeTab=t}loadPeople(){this.loading=!0,this.dbService.getPeopleWithAccounts().subscribe({next:t=>{this.peopleWithAccounts=t,this.filteredPeople=t,this.loading=!1},error:t=>{console.error(t),this.error="Erreur lors du chargement des donn\xe9es.",this.loading=!1}})}loadAuthUsers(){this.dbService.getAuthUsersInfo().subscribe({next:t=>{this.authUsers=t,this.filteredAuthUsers=t},error:t=>{console.error("Erreur lors du chargement des utilisateurs auth:",t)}})}filterPeople(){const t=this.searchTerm.toLowerCase().trim();this.filteredPeople=t?this.peopleWithAccounts.filter(s=>(s.nom?.toLowerCase()||"").includes(t)||(s.prenom?.toLowerCase()||"").includes(t)||(s.email?.toLowerCase()||"").includes(t)):this.peopleWithAccounts}filterAuthUsers(){const t=this.searchAuthTerm.toLowerCase().trim();this.filteredAuthUsers=t?this.authUsers.filter(s=>(s.email?.toLowerCase()||"").includes(t)):this.authUsers,this.currentPage=1}get paginatedAuthUsers(){const t=(this.currentPage-1)*this.itemsPerPage;return this.filteredAuthUsers.slice(t,t+this.itemsPerPage)}get totalPages(){return Math.ceil(this.filteredAuthUsers.length/this.itemsPerPage)||1}changePage(t){const s=this.currentPage+t;s>=1&&s<=this.totalPages&&(this.currentPage=s)}deleteUser(t){this.userToDeleteId=t,this.showDeleteModal=!0}onDeleteConfirm(){this.userToDeleteId&&this.dbService.deleteAuthUser(this.userToDeleteId).subscribe({next:()=>{this.authUsers=this.authUsers.filter(t=>t.id!==this.userToDeleteId),this.filterAuthUsers(),this.onDeleteCancel()},error:t=>{console.error("Erreur lors de la suppression:",t),alert("Une erreur est survenue lors de la suppression de l'utilisateur."),this.onDeleteCancel()}})}onDeleteCancel(){this.showDeleteModal=!1,this.userToDeleteId=null}changePassword(t){this.selectedUserId=t,this.showPasswordModal=!0}onPasswordModalClose(){this.showPasswordModal=!1,this.selectedUserId=null}onPasswordModalSave(t){this.dbService.updateAuthUserPassword(t.userId,t.password).subscribe({next:()=>{alert("Mot de passe mis \xe0 jour avec succ\xe8s."),this.onPasswordModalClose()},error:s=>{console.error("Erreur lors de la mise \xe0 jour du mot de passe:",s),alert("Une erreur est survenue lors de la mise \xe0 jour du mot de passe.")}})}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-params"]],standalone:!0,features:[e.aNF],decls:15,vars:6,consts:[[1,"container","mx-auto","p-4","sm:p-6","lg:p-8"],["routerLink","/management",1,"inline-flex","items-center","text-indigo-600","hover:text-indigo-800","mb-4","group","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-2","transform","group-hover:-translate-x-1","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-800","mb-6"],[1,"border-b","border-gray-200","mb-6"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],["class","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"userId","close","save",4,"ngIf"],["title","Supprimer l'utilisateur","message","\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ? Cette action est irr\xe9versible et supprimera \xe9galement les donn\xe9es li\xe9es.","confirmText","Supprimer","cancelText","Annuler","type","danger",3,"confirm","cancel",4,"ngIf"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm","transition-colors","duration-200",3,"click","ngClass"],[1,"mb-6"],["type","text","placeholder","Rechercher par nom, pr\xe9nom ou email...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-colors","shadow-sm",3,"ngModelChange","input","ngModel"],["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6","role","alert",4,"ngIf"],["class","bg-white shadow-md rounded-lg overflow-hidden",4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-indigo-600"],[1,"ml-2","text-gray-600"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-6"],[1,"font-bold"],[1,"block","sm:inline"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","leading-normal"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-5","py-5","border-b","border-gray-200","bg-white","text-sm"],[1,"text-gray-900","whitespace-no-wrap"],[1,"text-xs","bg-gray-100","p-1","rounded"],["colspan","5",1,"px-5","py-5","border-b","border-gray-200","bg-white","text-sm","text-center","text-gray-500"],[1,"bg-white","shadow","rounded-lg","p-6","text-center","text-gray-500"],["type","text","placeholder","Rechercher par email...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-colors","shadow-sm",3,"ngModelChange","input","ngModel"],[1,"px-5","py-5","bg-white","border-t","flex","flex-col","xs:flex-row","items-center","xs:justify-between"],[1,"text-xs","xs:text-sm","text-gray-900"],[1,"inline-flex","mt-2","xs:mt-0"],[1,"text-sm","bg-gray-200","hover:bg-gray-300","text-gray-800","font-semibold","py-2","px-4","rounded-l","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-sm","bg-gray-200","hover:bg-gray-300","text-gray-800","font-semibold","py-2","px-4","rounded-r","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-gray-900","whitespace-no-wrap",3,"title"],["class","relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight mr-1",4,"ngFor","ngForOf"],[1,"text-indigo-600","hover:text-indigo-900","font-medium","transition-colors","duration-150","mr-3",3,"click"],[1,"text-red-600","hover:text-red-900","font-medium","transition-colors","duration-150",3,"click"],[1,"relative","inline-block","px-3","py-1","font-semibold","text-green-900","leading-tight","mr-1"],["aria-hidden","",1,"absolute","inset-0","bg-green-200","opacity-50","rounded-full"],[1,"relative","text-xs"],[3,"close","save","userId"],["title","Supprimer l'utilisateur","message","\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ? Cette action est irr\xe9versible et supprimera \xe9galement les donn\xe9es li\xe9es.","confirmText","Supprimer","cancelText","Annuler","type","danger",3,"confirm","cancel"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"a",1),e.qSk(),e.j41(2,"svg",2),e.nrm(3,"path",3),e.k0s(),e.EFF(4," Retour \xe0 la gestion "),e.k0s(),e.joV(),e.j41(5,"h1",4),e.EFF(6,"Utilisateurs avec compte"),e.k0s(),e.j41(7,"div",5)(8,"nav",6),e.DNE(9,E,2,2,"button",7),e.k0s()(),e.DNE(10,$,6,4,"div",8)(11,A,3,0,"div",8)(12,S,31,7,"div",8)(13,Y,1,1,"app-change-password-modal",9)(14,N,1,0,"app-confirmation-modal",10),e.k0s()),2&s&&(e.R7$(9),e.Y8G("ngForOf",o.tabs),e.R7$(),e.Y8G("ngIf","clients"===o.activeTab),e.R7$(),e.Y8G("ngIf","corporate"===o.activeTab),e.R7$(),e.Y8G("ngIf","autres"===o.activeTab),e.R7$(),e.Y8G("ngIf",o.showPasswordModal),e.R7$(),e.Y8G("ngIf",o.showDeleteModal))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.vh,a.YN,a.me,a.BC,a.vS,g.Wk,x,P]})}return r})()}}]);