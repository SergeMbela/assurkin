"use strict";(self.webpackChunkassurkin=self.webpackChunkassurkin||[]).push([[989],{8989:(W,y,l)=>{l.r(y),l.d(y,{MessagerieComponent:()=>H});var d=l(467),e=l(4438),g=l(177),x=l(9981),o=l(9417),E=l(8141),F=l(5558),p=l(5312),_=l(4125),f=l(6648),b=l(1626);let M=(()=>{class s{http;functionUrl=`${p.c.supabaseUrl}/functions/v1/send-email`;constructor(t){this.http=t}sendEmail(t){return(0,f.H)(fetch(this.functionUrl,{method:"POST",headers:{Authorization:`Bearer ${p.c.supabaseKey}`,apikey:p.c.supabaseKey,"Content-Type":"application/json"},body:JSON.stringify(t)}))}static \u0275fac=function(n){return new(n||s)(e.KVO(b.Qq))};static \u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var S=l(1807),$=l(8810),j=l(6354),w=l(9692);let T=(()=>{class s{supabase;http;apiUrl=`${p.c.supabaseUrl}/functions/v1/create-payment-intent`;constructor(t,n){this.supabase=t,this.http=n}createPaymentIntent(t){return(0,f.H)(this.supabase.supabase.auth.getSession()).pipe((0,F.n)(n=>{const r=n.data.session;if(!r)return(0,$.$)(()=>new Error("Utilisateur non authentifi\xe9. Impossible de cr\xe9er une intention de paiement."));const a=(new b.Lr).set("Authorization",`Bearer ${r.access_token}`);return this.http.post(this.apiUrl,{amount:t},{headers:a})}))}createPaymentRequest(t){var n=this;return(0,d.A)(function*(){const{data:r,error:a}=yield n.supabase.supabase.from("payment_requests").insert(t).select().single();if(a)throw console.error("Erreur lors de la cr\xe9ation de la demande de paiement:",a),a;return r})()}getPaymentRequestsForUser(t){return(0,f.H)(this.supabase.supabase.from("payment_requests").select("*").eq("uid_user",t).order("created_at",{ascending:!1})).pipe((0,j.T)(n=>n.data||[]))}updatePaymentRequestStatus(t,n){return(0,f.H)(this.supabase.supabase.from("payment_requests").update(n).eq("id",t).select().single()).pipe((0,j.T)(r=>{if(r.error)throw r.error;return r.data}))}static \u0275fac=function(n){return new(n||s)(e.KVO(w.w),e.KVO(b.Qq))};static \u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const C=()=>["/management"];function D(s,m){if(1&s&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",t.successMessage," ")}}function q(s,m){if(1&s&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}function I(s,m){1&s&&(e.qSk(),e.j41(0,"svg",29),e.nrm(1,"circle",30)(2,"path",31),e.k0s())}function R(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"form",19),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.sendSms())}),e.j41(2,"div",20)(3,"label",21),e.EFF(4,"Destinataire (t\xe9l\xe9phone)"),e.k0s(),e.nrm(5,"input",22),e.k0s(),e.j41(6,"div",20)(7,"label",23),e.EFF(8,"Message"),e.k0s(),e.nrm(9,"textarea",24),e.j41(10,"div",25),e.EFF(11),e.k0s()(),e.j41(12,"div",26)(13,"button",27),e.DNE(14,I,3,0,"svg",28),e.EFF(15),e.k0s()()()()}if(2&s){let t;const n=e.XpG();e.R7$(),e.Y8G("formGroup",n.smsForm),e.R7$(10),e.SpI(" ",(null==(t=n.smsForm.get("message"))||null==t.value?null:t.value.length)||0," / 160 caract\xe8res "),e.R7$(2),e.Y8G("disabled",n.smsForm.invalid||n.loading),e.R7$(),e.Y8G("ngIf",n.loading),e.R7$(),e.SpI(" ",n.loading?"Envoi en cours...":"Envoyer le SMS"," ")}}function G(s,m){1&s&&(e.qSk(),e.j41(0,"svg",29),e.nrm(1,"circle",30)(2,"path",31),e.k0s())}function V(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"form",19),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.sendEmail())}),e.j41(2,"div",20)(3,"label",32),e.EFF(4,"Destinataire (email)"),e.k0s(),e.nrm(5,"input",33),e.k0s(),e.j41(6,"div",20)(7,"label",34),e.EFF(8,"Sujet"),e.k0s(),e.nrm(9,"input",35),e.k0s(),e.j41(10,"div",20)(11,"label",36),e.EFF(12,"Contenu de l'e-mail"),e.k0s(),e.nrm(13,"textarea",37),e.k0s(),e.j41(14,"div",26)(15,"button",27),e.DNE(16,G,3,0,"svg",28),e.EFF(17),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("formGroup",t.emailForm),e.R7$(14),e.Y8G("disabled",t.emailForm.invalid||t.loading),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.SpI(" ",t.loading?"Envoi en cours...":"Envoyer l'e-mail"," ")}}function A(s,m){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=m.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.label)}}function Y(s,m){1&s&&(e.j41(0,"div",55),e.EFF(1,"Le sujet est requis."),e.k0s())}function N(s,m){1&s&&(e.j41(0,"div",55),e.EFF(1,"Le montant est requis."),e.k0s())}function U(s,m){1&s&&(e.j41(0,"div",55),e.EFF(1,"Le montant doit \xeatre positif."),e.k0s())}function L(s,m){1&s&&(e.j41(0,"div",55),e.EFF(1,"La date d'\xe9ch\xe9ance est requise."),e.k0s())}function P(s,m){1&s&&(e.j41(0,"div",55),e.EFF(1,"La date d'\xe9ch\xe9ance ne peut pas \xeatre dans le pass\xe9."),e.k0s())}function X(s,m){1&s&&(e.qSk(),e.j41(0,"svg",29),e.nrm(1,"circle",30)(2,"path",31),e.k0s())}function B(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"form",19),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.sendPaymentRequest())}),e.j41(2,"div",38)(3,"div",20)(4,"label",39),e.EFF(5,"Sujet de la demande"),e.k0s(),e.j41(6,"select",40)(7,"option",41),e.EFF(8,"S\xe9lectionnez un sujet"),e.k0s(),e.DNE(9,A,2,2,"option",42),e.k0s(),e.DNE(10,Y,2,0,"div",43),e.k0s(),e.j41(11,"div",20)(12,"label",44),e.EFF(13,"Montant"),e.k0s(),e.j41(14,"div",45),e.nrm(15,"input",46),e.j41(16,"div",47)(17,"span",48),e.EFF(18,"EUR"),e.k0s()()(),e.DNE(19,N,2,0,"div",43)(20,U,2,0,"div",43),e.k0s()(),e.j41(21,"div",20)(22,"label",49),e.EFF(23,"Date d'\xe9ch\xe9ance"),e.k0s(),e.nrm(24,"input",50),e.DNE(25,L,2,0,"div",43)(26,P,2,0,"div",43),e.k0s(),e.j41(27,"div",51)(28,"label",52),e.EFF(29,"Remarques (optionnel)"),e.k0s(),e.nrm(30,"textarea",53),e.k0s(),e.j41(31,"div",26)(32,"button",27),e.DNE(33,X,3,0,"svg",28),e.EFF(34),e.k0s()()()()}if(2&s){let t,n,r,a,u;const i=e.XpG();e.R7$(),e.Y8G("formGroup",i.paymentForm),e.R7$(8),e.Y8G("ngForOf",i.paymentSubjects),e.R7$(),e.Y8G("ngIf",(null==(t=i.paymentForm.get("sujet"))?null:t.touched)&&(null==(t=i.paymentForm.get("sujet"))?null:t.hasError("required"))),e.R7$(9),e.Y8G("ngIf",(null==(n=i.paymentForm.get("montant"))?null:n.touched)&&(null==(n=i.paymentForm.get("montant"))?null:n.hasError("required"))),e.R7$(),e.Y8G("ngIf",(null==(r=i.paymentForm.get("montant"))?null:r.touched)&&(null==(r=i.paymentForm.get("montant"))?null:r.hasError("min"))),e.R7$(5),e.Y8G("ngIf",(null==(a=i.paymentForm.get("dateEcheance"))?null:a.touched)&&(null==(a=i.paymentForm.get("dateEcheance"))?null:a.hasError("required"))),e.R7$(),e.Y8G("ngIf",(null==(u=i.paymentForm.get("dateEcheance"))?null:u.touched)&&(null==(u=i.paymentForm.get("dateEcheance"))?null:u.hasError("pastDate"))),e.R7$(6),e.Y8G("disabled",i.paymentForm.invalid||i.loading),e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(),e.SpI(" ",i.loading?"Envoi en cours...":"Envoyer la demande de paiement"," ")}}let H=(()=>{class s{route=(0,e.WQX)(x.nX);fb=(0,e.WQX)(o.ok);smsService=(0,e.WQX)(_.T);mailService=(0,e.WQX)(M);dbService=(0,e.WQX)(S.y);paymentService=(0,e.WQX)(T);activeTab="sms";smsForm;emailForm;paymentForm;quoteId=null;quoteType=null;preneurDetails=null;currentUserUid=null;loading=!1;successMessage=null;errorMessage=null;paymentSubjects=[{value:"acompte",label:"Acompte"},{value:"solde",label:"Solde du devis"},{value:"regularisation",label:"R\xe9gularisation"},{value:"autre",label:"Autre"}];ngOnInit(){this.smsForm=this.fb.group({to:["",[o.k0.required]],message:["",[o.k0.required,o.k0.maxLength(160)]]}),this.emailForm=this.fb.group({to:["",[o.k0.required,o.k0.email]],subject:["",[o.k0.required]],htmlContent:["",[o.k0.required]]}),this.paymentForm=this.fb.group({sujet:["",o.k0.required],montant:[null,[o.k0.required,o.k0.min(.01)]],dateEcheance:["",[o.k0.required,this.futureDateValidator]],remarques:[""]}),this.route.paramMap.pipe((0,E.M)(t=>{this.quoteId=Number(t.get("id")),this.quoteType=t.get("type")}),(0,F.n)(()=>this.dbService.getFullQuoteDetails(this.quoteId))).subscribe(t=>{t&&t.preneur&&(console.log("D\xe9tails du preneur re\xe7us:",t.preneur),this.preneurDetails=t.preneur,this.smsForm.patchValue({to:this.preneurDetails?.telephone}),this.emailForm.patchValue({to:this.preneurDetails?.email}))}),this.dbService.getCurrentUser().subscribe(t=>{this.currentUserUid=t?.id??null})}setActiveTab(t){this.activeTab=t,this.resetMessages()}sendSms(){var t=this;if(this.smsForm.invalid)return;this.loading=!0,this.resetMessages();const{to:n,message:r}=this.smsForm.value;this.smsService.sendSms(n,r).then((0,d.A)(function*(){t.successMessage="SMS envoy\xe9 avec succ\xe8s !",yield t.saveMessageToDb("sms","sent",{recipient:n,content:r}),t.smsForm.get("message")?.reset()})).catch(function(){var a=(0,d.A)(function*(u){yield t.saveMessageToDb("sms","failed",{recipient:n,content:r,error:u.message}),t.errorMessage=u.message||"Une erreur est survenue lors de l'envoi du SMS."});return function(u){return a.apply(this,arguments)}}()).finally(()=>this.loading=!1)}sendEmail(){var t=this;if(this.emailForm.invalid)return;this.loading=!0,this.resetMessages();const n=this.emailForm.value;this.mailService.sendEmail(n).toPromise().then(function(){var r=(0,d.A)(function*(a){if(!a.ok){const u=yield a.json();throw new Error(u.error||`Erreur HTTP: ${a.status}`)}yield t.saveMessageToDb("email","sent",{recipient:n.to,subject:n.subject,content:n.htmlContent}),t.successMessage="E-mail envoy\xe9 avec succ\xe8s !",t.emailForm.get("subject")?.reset(),t.emailForm.get("htmlContent")?.reset()});return function(a){return r.apply(this,arguments)}}()).catch(function(){var r=(0,d.A)(function*(a){yield t.saveMessageToDb("email","failed",{recipient:n.to,subject:n.subject,content:n.htmlContent,error:a.message}),t.errorMessage=a.error?.error||"Une erreur est survenue lors de l'envoi de l'e-mail."});return function(a){return r.apply(this,arguments)}}()).finally(()=>this.loading=!1)}sendPaymentRequest(){var t=this;return(0,d.A)(function*(){if(t.paymentForm.invalid)return void t.paymentForm.markAllAsTouched();if(t.loading=!0,t.resetMessages(),!t.preneurDetails?.telephone||!t.preneurDetails?.email||!t.preneurDetails?.id)return t.errorMessage="Les d\xe9tails du preneur (ID, t\xe9l\xe9phone, e-mail) sont incomplets.",void(t.loading=!1);const{sujet:n,montant:r,dateEcheance:a,remarques:u}=t.paymentForm.value,i=t.paymentSubjects.find(c=>c.value===n)?.label||n;try{const c=yield t.paymentService.createPaymentRequest({quote_id:t.quoteId,quote_type:t.quoteType,montant:r,sujet:i,remarques:u,date_echeance:a,uid_user:t.currentUserUid??void 0}),k=`${p.c.stripe_lien_paiement}/paiement/${c.uid}`,z=`${p.c.stripe_lien_paiement}/p/${c.uid}`;let v=`Paiement requis: ${r}\u20ac pour "${i}" (devis ${t.quoteId}). \xc9ch\xe9ance: ${new Date(a).toLocaleDateString("fr-BE")}. Payer: ${k}`;v.length>160&&(v=`Paiement requis: ${r}\u20ac pour "${i}" (devis ${t.quoteId}). \xc9ch\xe9ance: ${new Date(a).toLocaleDateString("fr-BE")}. Payer: ${z}`);const Q=`Demande de paiement pour votre devis N\xb0${t.quoteId}`,O=`\n        <p>Bonjour ${t.preneurDetails.prenom||""},</p>\n        <p>Une demande de paiement de <strong>${r}\u20ac</strong> a \xe9t\xe9 \xe9mise pour votre devis N\xb0${t.quoteId}.</p>\n        <ul>\n          <li><strong>Sujet :</strong> ${i}</li>\n          <li><strong>Montant :</strong> ${r}\u20ac</li>\n          <li><strong>Date d'\xe9ch\xe9ance :</strong> ${new Date(a).toLocaleDateString("fr-BE")}</li>\n        </ul>\n        ${u?`<p><strong>Remarques :</strong> ${u}</p>`:""}\n        <p>Vous pouvez effectuer le paiement en cliquant sur le lien ci-dessous :</p>\n        <p><a href="${k}" style="padding: 10px 15px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">Payer maintenant</a></p>\n        <p>Cordialement,<br>L'\xe9quipe assurkin</p>\n      `,h={to:t.preneurDetails.email,subject:Q,htmlContent:O};yield Promise.all([t.smsService.sendSms(t.preneurDetails.telephone,v).then(()=>t.saveMessageToDb("sms","sent",{recipient:t.preneurDetails.telephone,content:v,subject:`Demande de paiement: ${i}`})),t.mailService.sendEmail(h).toPromise().then(()=>t.saveMessageToDb("email","sent",{recipient:h.to,subject:h.subject,content:h.htmlContent}))]),t.successMessage="La demande de paiement a \xe9t\xe9 cr\xe9\xe9e et envoy\xe9e avec succ\xe8s par SMS et e-mail.",t.paymentForm.reset(),t.paymentForm.get("sujet")?.setValue("")}catch(c){console.error("Erreur lors du processus de demande de paiement:",c),t.errorMessage=c.message||"Une erreur est survenue lors de la cr\xe9ation ou de l'envoi de la demande de paiement."}finally{t.loading=!1}})()}saveMessageToDb(t,n,r){var a=this;return(0,d.A)(function*(){if(!a.quoteType||!a.quoteId)return void console.error("Impossible de sauvegarder le message : informations sur le devis manquantes.");const u={categorie:a.quoteType,categorie_id:a.quoteId,type:t,status:n,...r};yield a.dbService.saveMessage(u)})()}resetMessages(){this.successMessage=null,this.errorMessage=null}futureDateValidator(t){if(t.value){const n=new Date;if(n.setHours(0,0,0,0),new Date(t.value)<n)return{pastDate:!0}}return null}static \u0275fac=function(n){return new(n||s)};static \u0275cmp=e.VBU({type:s,selectors:[["app-messagerie"]],standalone:!0,features:[e.aNF],decls:28,vars:11,consts:[[1,"container","mx-auto","p-4","sm:p-6","lg:p-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-800"],[1,"text-blue-600","hover:text-blue-800","font-medium","flex","items-center",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"border-b","border-gray-200","mb-6"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm","flex","items-center",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"],["stroke-linecap","round","stroke-linejoin","round","d","M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"],[1,"bg-white","p-6","rounded-lg","shadow-md"],["class","mb-4 p-4 text-sm text-green-700 bg-green-100 rounded-lg","role","alert",4,"ngIf"],["class","mb-4 p-4 text-sm text-red-700 bg-red-100 rounded-lg","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"mb-4","p-4","text-sm","text-green-700","bg-green-100","rounded-lg"],["role","alert",1,"mb-4","p-4","text-sm","text-red-700","bg-red-100","rounded-lg"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","sms-to",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","sms-to","formControlName","to",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],["for","sms-message",1,"block","text-sm","font-medium","text-gray-700"],["id","sms-message","formControlName","message","rows","5",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],[1,"text-right","text-xs","text-gray-500","mt-1"],[1,"text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["for","email-to",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email-to","formControlName","to",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],["for","email-subject",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","email-subject","formControlName","subject",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],["for","email-content",1,"block","text-sm","font-medium","text-gray-700"],["id","email-content","formControlName","htmlContent","rows","10",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","payment-subject",1,"block","text-sm","font-medium","text-gray-700"],["id","payment-subject","formControlName","sujet",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-red-600 text-xs mt-1",4,"ngIf"],["for","payment-amount",1,"block","text-sm","font-medium","text-gray-700"],[1,"relative","mt-1"],["type","number","id","payment-amount","formControlName","montant","placeholder","0.00",1,"pl-3","pr-12","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","ring-1","ring-slate-200","shadow-sm"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["for","payment-due-date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","payment-due-date","formControlName","dateEcheance",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],[1,"mb-6"],["for","payment-remarks",1,"block","text-sm","font-medium","text-gray-700"],["id","payment-remarks","formControlName","remarques","rows","4","placeholder","Ajoutez des informations compl\xe9mentaires pour le client...",1,"mt-1","focus:ring-2","focus:ring-blue-500","focus:outline-none","appearance-none","w-full","text-sm","leading-6","text-slate-900","placeholder-slate-400","rounded-md","py-2","px-3","ring-1","ring-slate-200","shadow-sm"],[3,"value"],[1,"text-red-600","text-xs","mt-1"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3),e.k0s(),e.j41(4,"a",3),e.qSk(),e.j41(5,"svg",4),e.nrm(6,"path",5),e.k0s(),e.EFF(7," Retour \xe0 la gestion "),e.k0s()(),e.joV(),e.j41(8,"div",6)(9,"nav",7)(10,"button",8),e.bIt("click",function(){return r.setActiveTab("sms")}),e.qSk(),e.j41(11,"svg",9),e.nrm(12,"path",10),e.k0s(),e.EFF(13," SMS "),e.k0s(),e.joV(),e.j41(14,"button",8),e.bIt("click",function(){return r.setActiveTab("email")}),e.qSk(),e.j41(15,"svg",9),e.nrm(16,"path",11),e.k0s(),e.EFF(17," Email "),e.k0s(),e.joV(),e.j41(18,"button",8),e.bIt("click",function(){return r.setActiveTab("payment")}),e.qSk(),e.j41(19,"svg",9),e.nrm(20,"path",12),e.k0s(),e.EFF(21," Paiement "),e.k0s()()(),e.joV(),e.j41(22,"div",13),e.DNE(23,D,2,1,"div",14)(24,q,2,1,"div",15)(25,R,16,5,"div",16)(26,V,18,4,"div",16)(27,B,35,10,"div",16),e.k0s()()),2&n&&(e.R7$(3),e.SpI(" Messagerie pour le devis #",r.quoteId," "),e.R7$(),e.Y8G("routerLink",e.lJ4(10,C)),e.R7$(6),e.Y8G("ngClass","sms"===r.activeTab?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),e.R7$(4),e.Y8G("ngClass","email"===r.activeTab?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),e.R7$(4),e.Y8G("ngClass","payment"===r.activeTab?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),e.R7$(5),e.Y8G("ngIf",r.successMessage),e.R7$(),e.Y8G("ngIf",r.errorMessage),e.R7$(),e.Y8G("ngIf","sms"===r.activeTab),e.R7$(),e.Y8G("ngIf","email"===r.activeTab),e.R7$(),e.Y8G("ngIf","payment"===r.activeTab))},dependencies:[g.MD,g.YU,g.Sq,g.bT,o.X1,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.j4,o.JD,x.Wk],encapsulation:2})}return s})()}}]);