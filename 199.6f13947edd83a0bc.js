"use strict";(self.webpackChunkassurkin=self.webpackChunkassurkin||[]).push([[199],{2199:(W,_,l)=>{l.r(_),l.d(_,{PaymentComponent:()=>U});var h=l(467),e=l(4438),u=l(177),m=l(9417),p=l(9981),b=l(8212),y=l(9499),v=l(3161),x=l(5558),P=l(7673),C=l(3207),E=l(8192),g=l(9763);const j=(a,s)=>({"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":a,"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":s});function k(a,s){if(1&a&&(e.j41(0,"div",13)(1,"div",14)(2,"div",15)(3,"dt",16),e.EFF(4,"Total Pay\xe9"),e.k0s(),e.j41(5,"dd",17),e.EFF(6),e.nI1(7,"currency"),e.k0s()()(),e.j41(8,"div",18)(9,"div",15)(10,"dt",16),e.EFF(11,"Total En Attente"),e.k0s(),e.j41(12,"dd",17),e.EFF(13),e.nI1(14,"currency"),e.k0s()()()()),2&a){const t=e.XpG();e.R7$(6),e.JRh(e.ii3(7,2,t.totalPaid,"EUR","symbol","1.2-2")),e.R7$(7),e.JRh(e.ii3(14,7,t.totalPending,"EUR","symbol","1.2-2"))}}function F(a,s){1&a&&(e.j41(0,"div",19),e.nrm(1,"div",20),e.j41(2,"p",21),e.EFF(3,"Chargement..."),e.k0s()())}function T(a,s){if(1&a&&(e.j41(0,"div",22)(1,"span",23),e.EFF(2),e.k0s()()),2&a){const t=e.XpG();e.R7$(2),e.JRh(t.errorMessage)}}function R(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const r=e.XpG(4);return e.Njj(r.clearFilter())}),e.nrm(1,"i",38),e.j41(2,"span"),e.EFF(3,"Effacer filtre"),e.k0s()()}}function w(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"button",30),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.exportToCsv())}),e.nrm(3,"i",31),e.j41(4,"span"),e.EFF(5,"Exporter CSV"),e.k0s()(),e.DNE(6,R,4,0,"button",32),e.k0s(),e.j41(7,"div",33)(8,"input",34),e.bIt("ngModelChange",function(r){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onSearchChange(r))}),e.k0s(),e.j41(9,"div",35),e.nrm(10,"i",36),e.k0s()()()}if(2&a){const t=e.XpG(3);e.R7$(6),e.Y8G("ngIf",t.searchTerm),e.R7$(2),e.Y8G("ngModel",t.searchTerm)}}function I(a,s){1&a&&(e.j41(0,"div",39)(1,"p",40),e.EFF(2,"Aucune demande de paiement trouv\xe9e."),e.k0s()())}function D(a,s){1&a&&(e.j41(0,"div",39)(1,"p",40),e.EFF(2,"Aucun r\xe9sultat ne correspond \xe0 votre recherche."),e.k0s()())}function M(a,s){1&a&&(e.j41(0,"span"),e.nrm(1,"i",53),e.EFF(2," Envoi..."),e.k0s())}function $(a,s){1&a&&(e.j41(0,"span"),e.nrm(1,"i",54),e.EFF(2," Relancer"),e.k0s())}function G(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",52),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,o=e.XpG(4);return e.Njj(o.resendReminder(r))}),e.DNE(1,M,3,0,"span",11)(2,$,3,0,"span",11),e.k0s()}if(2&a){const t=e.XpG().$implicit,n=e.XpG(4);e.Y8G("disabled",n.sendingEmailId===t.id),e.R7$(),e.Y8G("ngIf",n.sendingEmailId===t.id),e.R7$(),e.Y8G("ngIf",n.sendingEmailId!==t.id)}}function Y(a,s){if(1&a&&(e.j41(0,"tr")(1,"td",45),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"td",45)(5,"p",46),e.EFF(6),e.k0s()(),e.j41(7,"td",45)(8,"p",47),e.EFF(9),e.nI1(10,"currency"),e.k0s()(),e.j41(11,"td",45)(12,"span",48),e.nrm(13,"span",49),e.j41(14,"span",50),e.EFF(15),e.k0s()()(),e.j41(16,"td",45)(17,"p",46),e.EFF(18),e.k0s()(),e.j41(19,"td",45),e.DNE(20,G,3,3,"button",51),e.k0s()()),2&a){const t=s.$implicit,n=e.XpG(4);e.R7$(2),e.SpI(" ",e.i5U(3,8,t.created_at,"dd/MM/yyyy HH:mm")," "),e.R7$(4),e.JRh(t.sujet),e.R7$(3),e.SpI(" ",e.ii3(10,11,t.montant,"EUR","symbol","1.2-2")," "),e.R7$(3),e.Y8G("ngClass",n.getStatusClass(t.statut)),e.R7$(3),e.JRh(n.getStatusLabel(t.statut)),e.R7$(3),e.Lme(" ",t.quote_type," #",t.quote_id," "),e.R7$(2),e.Y8G("ngIf","pending"===t.statut)}}function A(a,s){if(1&a&&(e.j41(0,"div",41)(1,"table",42)(2,"thead")(3,"tr")(4,"th",43),e.EFF(5," Date "),e.k0s(),e.j41(6,"th",43),e.EFF(7," Sujet "),e.k0s(),e.j41(8,"th",43),e.EFF(9," Montant "),e.k0s(),e.j41(10,"th",43),e.EFF(11," Statut "),e.k0s(),e.j41(12,"th",43),e.EFF(13," Dossier "),e.k0s(),e.j41(14,"th",43),e.EFF(15," Actions "),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,Y,21,16,"tr",44),e.k0s()()()),2&a){const t=e.XpG(3);e.R7$(17),e.Y8G("ngForOf",t.paginatedPayments)}}function S(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"button",68),e.bIt("click",function(){const r=e.eBV(t).$implicit,o=e.XpG(4);return e.Njj(o.goToPage(r))}),e.EFF(2),e.k0s(),e.bVm()}if(2&a){const t=s.$implicit,n=e.XpG(4);e.R7$(),e.Y8G("ngClass",e.l_i(2,j,t===n.currentPage,t!==n.currentPage)),e.R7$(),e.SpI(" ",t," ")}}function B(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",55)(1,"div",56)(2,"button",57),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.goToPage(r.currentPage-1))}),e.EFF(3," Pr\xe9c\xe9dent "),e.k0s(),e.j41(4,"button",58),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.goToPage(r.currentPage+1))}),e.EFF(5," Suivant "),e.k0s()(),e.j41(6,"div",59)(7,"div")(8,"p",60),e.EFF(9," Affichage de "),e.j41(10,"span",61),e.EFF(11),e.k0s(),e.EFF(12," \xe0 "),e.j41(13,"span",61),e.EFF(14),e.k0s(),e.EFF(15," sur "),e.j41(16,"span",61),e.EFF(17),e.k0s(),e.EFF(18," r\xe9sultats "),e.k0s()(),e.j41(19,"div")(20,"nav",62)(21,"button",63),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.goToPage(r.currentPage-1))}),e.j41(22,"span",64),e.EFF(23,"Pr\xe9c\xe9dent"),e.k0s(),e.nrm(24,"i",65),e.k0s(),e.DNE(25,S,3,5,"ng-container",44),e.j41(26,"button",66),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.goToPage(r.currentPage+1))}),e.j41(27,"span",64),e.EFF(28,"Suivant"),e.k0s(),e.nrm(29,"i",67),e.k0s()()()()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.Y8G("disabled",1===t.currentPage),e.R7$(2),e.Y8G("disabled",t.currentPage===t.getTotalPages()),e.R7$(7),e.JRh((t.currentPage-1)*t.itemsPerPage+1),e.R7$(3),e.JRh(t.currentPage*t.itemsPerPage>t.filteredPayments.length?t.filteredPayments.length:t.currentPage*t.itemsPerPage),e.R7$(3),e.JRh(t.filteredPayments.length),e.R7$(4),e.Y8G("disabled",1===t.currentPage),e.R7$(4),e.Y8G("ngForOf",t.getPagesArray()),e.R7$(),e.Y8G("disabled",t.currentPage===t.getTotalPages())}}function O(a,s){if(1&a&&(e.j41(0,"div"),e.DNE(1,w,11,2,"div",24)(2,I,3,0,"div",25)(3,D,3,0,"div",25)(4,A,18,1,"div",26)(5,B,30,8,"div",27),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.payments.length>0),e.R7$(),e.Y8G("ngIf",0===t.payments.length),e.R7$(),e.Y8G("ngIf",t.payments.length>0&&0===t.paginatedPayments.length),e.R7$(),e.Y8G("ngIf",t.paginatedPayments.length>0),e.R7$(),e.Y8G("ngIf",t.getTotalPages()>1)}}function N(a,s){if(1&a&&(e.j41(0,"option",79),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function X(a,s){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"div",69)(2,"div",50)(3,"select",70),e.mxI("ngModelChange",function(r){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedYear,r)||(o.selectedYear=r),e.Njj(r)}),e.bIt("ngModelChange",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onYearChange())}),e.DNE(4,N,2,2,"option",71),e.k0s(),e.j41(5,"div",72),e.nrm(6,"i",73),e.k0s()()(),e.j41(7,"div",74)(8,"div",75)(9,"h3",76),e.EFF(10,"\xc9volution Mensuelle des Paiements"),e.k0s(),e.j41(11,"div",77)(12,"canvas",78),e.bIt("chartClick",function(r){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onBarChartClick(r))}),e.k0s()()(),e.j41(13,"div",75)(14,"h3",76),e.EFF(15,"R\xe9partition par Sujet"),e.k0s(),e.j41(16,"div",77)(17,"canvas",78),e.bIt("chartClick",function(r){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onPieChartClick(r))}),e.k0s()()()()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.selectedYear),e.R7$(),e.Y8G("ngForOf",t.availableYears),e.R7$(8),e.Y8G("data",t.barChartData)("options",t.barChartOptions)("type",t.barChartType),e.R7$(5),e.Y8G("data",t.pieChartData)("options",t.pieChartOptions)("type",t.pieChartType)}}function L(a,s){if(1&a&&(e.j41(0,"div"),e.DNE(1,O,6,5,"div",11)(2,X,18,8,"div",11),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf","history"===t.activeTab),e.R7$(),e.Y8G("ngIf","chart"===t.activeTab)}}function V(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",80)(1,"div",81)(2,"div",82),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeConfirmModal())}),e.k0s(),e.j41(3,"span",83),e.EFF(4,"\u200b"),e.k0s(),e.j41(5,"div",84)(6,"div",85)(7,"div",86)(8,"div",87),e.nrm(9,"i",88),e.k0s(),e.j41(10,"div",89)(11,"h3",90),e.EFF(12," Confirmer l'envoi du rappel "),e.k0s(),e.j41(13,"div",91)(14,"p",92),e.EFF(15," \xcates-vous s\xfbr de vouloir envoyer un rappel de paiement par e-mail pour le dossier "),e.j41(16,"span",93),e.EFF(17),e.k0s(),e.EFF(18," ? "),e.k0s()()()()(),e.j41(19,"div",94)(20,"button",95),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.confirmResend())}),e.EFF(21," Envoyer "),e.k0s(),e.j41(22,"button",96),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeConfirmModal())}),e.EFF(23," Annuler "),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(17),e.Lme("",null==t.paymentToRemind?null:t.paymentToRemind.quote_type," #",null==t.paymentToRemind?null:t.paymentToRemind.quote_id,"")}}let U=(()=>{class a{paymentService=(0,e.WQX)(b.W);authService=(0,e.WQX)(y.u);mailService=(0,e.WQX)(v.t);payments=[];filteredPayments=[];loading=!0;errorMessage=null;sendingEmailId=null;paginatedPayments=[];currentPage=1;itemsPerPage=15;searchTerm="";activeTab="history";selectedYear=(new Date).getFullYear();availableYears=[];showConfirmModal=!1;paymentToRemind=null;pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}}};pieChartData={labels:[],datasets:[{data:[]}]};pieChartType="pie";barChartData={labels:[],datasets:[]};barChartOptions={responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Montant (\u20ac)"}}},plugins:{legend:{display:!0},tooltip:{callbacks:{footer:t=>{let n=0;const r=t[0].dataIndex;return t[0].chart.data.datasets.forEach(i=>{const d=Number(i.data[r]);isNaN(d)||(n+=d)}),"Total: "+n.toFixed(2)+" \u20ac"}}}}};barChartType="bar";constructor(){g.t1.register(...g.$L)}get totalPaid(){return this.filteredPayments.filter(t=>"paid"===t.statut).reduce((t,n)=>t+Number(n.montant),0)}get totalPending(){return this.filteredPayments.filter(t=>"pending"===t.statut).reduce((t,n)=>t+Number(n.montant),0)}ngOnInit(){const t=(new Date).getFullYear();for(let n=0;n<5;n++)this.availableYears.push(t-n);this.authService.currentUser$.pipe((0,x.n)(n=>n?this.paymentService.getPaymentRequestsByUser(n.id):(0,P.of)([]))).subscribe({next:n=>{this.payments=n,this.filteredPayments=n,this.loading=!1,this.currentPage=1,this.updatePaginatedPayments(),this.updateCharts()},error:n=>{console.error("Erreur chargement historique paiements",n),this.errorMessage="Impossible de charger l'historique des paiements.",this.loading=!1}})}getStatusLabel(t){switch(t){case"pending":return"En attente";case"paid":return"Pay\xe9";case"failed":return"\xc9chou\xe9";case"cancelled":return"Annul\xe9";case"overdue":return"En retard";default:return t}}getStatusClass(t){switch(t){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}resendReminder(t){t.preneur_uid?(this.paymentToRemind=t,this.showConfirmModal=!0):alert("Impossible de relancer : aucun client associ\xe9 \xe0 ce paiement.")}confirmResend(){var t=this;return(0,h.A)(function*(){if(!t.paymentToRemind)return;const n=t.paymentToRemind;if(n.preneur_uid){t.closeConfirmModal(),t.sendingEmailId=n.id;try{const r=yield t.paymentService.getPersonDetails(n.preneur_uid);if(!r||!r.email)return void alert("Impossible de r\xe9cup\xe9rer l'email du client.");const o=`\n        <p>Bonjour ${r.prenom} ${r.nom},</p>\n        <p>Sauf erreur de notre part, nous sommes toujours dans l'attente du r\xe8glement concernant votre dossier ${n.quote_type} #${n.quote_id}.</p>\n        <p><strong>Objet :</strong> ${n.sujet}</p>\n        <p><strong>Montant \xe0 r\xe9gler :</strong> ${n.montant} \u20ac</p>\n        <p><strong>Date limite :</strong> ${new Date(n.date_echeance).toLocaleDateString()}</p>\n        <p>Merci de r\xe9gulariser votre situation dans les plus brefs d\xe9lais via votre espace client.</p>\n        <p>Cordialement,<br>L'\xe9quipe Assurkin</p>\n      `;yield(0,C.s)(t.mailService.sendEmail({to:r.email,subject:`Rappel : Paiement en attente - Dossier #${n.quote_id}`,htmlContent:o})),alert("Rappel envoy\xe9 avec succ\xe8s !")}catch(r){console.error("Erreur lors de l'envoi du rappel:",r),alert("Une erreur est survenue lors de l'envoi du rappel.")}finally{t.sendingEmailId=null}}})()}closeConfirmModal(){this.showConfirmModal=!1,this.paymentToRemind=null}onSearchChange(t){if(this.searchTerm=t,this.currentPage=1,this.searchTerm){const n=this.searchTerm.toLowerCase();this.filteredPayments=this.payments.filter(r=>r.sujet.toLowerCase().includes(n)||r.montant.toString().includes(n)||(r.quote_type+" #"+r.quote_id).toLowerCase().includes(n)||r.created_at.toLowerCase().includes(n))}else this.filteredPayments=this.payments;this.updatePaginatedPayments(),this.updateCharts()}clearFilter(){this.onSearchChange("")}updatePaginatedPayments(){const t=(this.currentPage-1)*this.itemsPerPage;this.paginatedPayments=this.filteredPayments.slice(t,t+this.itemsPerPage)}onYearChange(){this.updateCharts()}onPieChartClick({active:n}){if(n&&n.length>0){const o=n[0].index,i=this.pieChartData.labels?.[o];i&&(this.onSearchChange(String(i)),this.activeTab="history")}}onBarChartClick({active:n}){if(n&&n.length>0){const o=n[0].index,i=this.barChartData.labels?.[o];i&&(this.onSearchChange(String(i)),this.activeTab="history")}}updateCharts(){if(!this.payments)return;const t=this.payments.filter(i=>new Date(i.created_at).getFullYear()===Number(this.selectedYear)),n=new Map;t.forEach(i=>{const d=i.sujet?i.sujet.trim():"Autre",c=n.get(d)||0;n.set(d,c+Number(i.montant))}),this.pieChartData={labels:Array.from(n.keys()),datasets:[{data:Array.from(n.values()),backgroundColor:["#60A5FA","#34D399","#F87171","#FBBF24","#A78BFA","#EC4899","#9CA3AF"]}]};const r=new Map;[...t].sort((i,d)=>new Date(i.created_at).getTime()-new Date(d.created_at).getTime()).forEach(i=>{const d=new Date(i.created_at),c=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;r.has(c)||r.set(c,{paid:0,unpaid:0});const f=r.get(c);"paid"===i.statut?f.paid+=Number(i.montant):["pending","overdue","failed"].includes(i.statut)&&(f.unpaid+=Number(i.montant))}),this.barChartData={labels:Array.from(r.keys()),datasets:[{data:Array.from(r.values()).map(i=>i.paid),label:"Pay\xe9",backgroundColor:"#4ade80"},{data:Array.from(r.values()).map(i=>i.unpaid),label:"Non Pay\xe9",backgroundColor:"#f87171"}]}}goToPage(t){this.currentPage=t,this.updatePaginatedPayments()}getTotalPages(){return Math.ceil(this.filteredPayments.length/this.itemsPerPage)}getPagesArray(){return Array(this.getTotalPages()).fill(0).map((t,n)=>n+1)}exportToCsv(){const t=this.filteredPayments;if(0===t.length)return;const r=[["Date","Sujet","Montant","Statut","Type Dossier","ID Dossier"].join(";"),...t.map(c=>[new Date(c.created_at).toLocaleDateString("fr-FR"),`"${(c.sujet||"").replace(/"/g,'""')}"`,c.montant.toString().replace(".",","),c.statut,c.quote_type,c.quote_id].join(";"))].join("\n"),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(o),d=document.createElement("a");d.setAttribute("href",i),d.setAttribute("download",`paiements_export_${(new Date).toISOString().slice(0,10)}.csv`),document.body.appendChild(d),d.click(),document.body.removeChild(d)}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=e.VBU({type:a,selectors:[["app-payment"]],standalone:!0,features:[e.aNF],decls:18,vars:21,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"mb-4"],["routerLink","/management",1,"inline-flex","items-center","text-gray-600","hover:text-indigo-600","transition-colors"],[1,"fas","fa-arrow-left","mr-2"],[1,"text-2xl","font-bold","mb-6","text-gray-800"],["class","grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",4,"ngIf"],[1,"border-b","border-gray-200","mb-6"],["aria-label","Tabs",1,"-mb-px","flex","space-x-8"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm","hover:text-gray-700","hover:border-gray-300","transition-colors","focus:outline-none",3,"click"],["class","text-center py-8",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4","role","alert",4,"ngIf"],[4,"ngIf"],["class","fixed z-50 inset-0 overflow-y-auto","aria-labelledby","modal-title","role","dialog","aria-modal","true",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","mb-6"],[1,"bg-white","overflow-hidden","shadow","rounded-lg","border-l-4","border-green-500"],[1,"px-4","py-5","sm:p-6"],[1,"text-sm","font-medium","text-gray-500","truncate"],[1,"mt-1","text-3xl","font-semibold","text-gray-900"],[1,"bg-white","overflow-hidden","shadow","rounded-lg","border-l-4","border-yellow-500"],[1,"text-center","py-8"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"mt-2","text-gray-600"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-4"],[1,"block","sm:inline"],["class","flex justify-between items-center mb-4",4,"ngIf"],["class","text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","overflow-x-auto bg-white shadow-md rounded-lg",4,"ngIf"],["class","bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4 rounded-b-lg shadow-md",4,"ngIf"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","space-x-2"],[1,"bg-green-600","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded","inline-flex","items-center","transition-colors","shadow-sm",3,"click"],[1,"fas","fa-file-csv","mr-2"],["class","bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded inline-flex items-center transition-colors shadow-sm",3,"click",4,"ngIf"],[1,"relative","w-full","max-w-xs"],["type","text","placeholder","Rechercher par sujet ou montant",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-search","text-gray-400"],[1,"bg-gray-500","hover:bg-gray-600","text-white","font-bold","py-2","px-4","rounded","inline-flex","items-center","transition-colors","shadow-sm",3,"click"],[1,"fas","fa-times","mr-2"],[1,"text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-gray-500"],[1,"overflow-x-auto","bg-white","shadow-md","rounded-lg"],[1,"min-w-full","leading-normal"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[4,"ngFor","ngForOf"],[1,"px-5","py-5","border-b","border-gray-200","bg-white","text-sm"],[1,"text-gray-900","whitespace-no-wrap"],[1,"text-gray-900","whitespace-no-wrap","font-bold"],[1,"relative","inline-block","px-3","py-1","font-semibold","leading-tight","rounded-full",3,"ngClass"],["aria-hidden","true",1,"absolute","inset-0","opacity-50","rounded-full"],[1,"relative"],["class","text-indigo-600 hover:text-indigo-900 font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150",3,"disabled","click",4,"ngIf"],[1,"text-indigo-600","hover:text-indigo-900","font-medium","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-150",3,"click","disabled"],[1,"fas","fa-spinner","fa-spin","mr-1"],[1,"fas","fa-paper-plane","mr-1"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6","mt-4","rounded-b-lg","shadow-md"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50",3,"click","disabled"],[1,"ml-3","relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50",3,"click","disabled"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50",3,"click","disabled"],[1,"sr-only"],[1,"fas","fa-chevron-left","h-5","w-5"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50",3,"click","disabled"],[1,"fas","fa-chevron-right","h-5","w-5"],[1,"relative","inline-flex","items-center","px-4","py-2","border","text-sm","font-medium",3,"click","ngClass"],[1,"flex","justify-end","mb-4"],[1,"block","appearance-none","w-full","bg-white","border","border-gray-300","hover:border-gray-400","px-4","py-2","pr-8","rounded","shadow","leading-tight","focus:outline-none","focus:shadow-outline","text-gray-700",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],[1,"fas","fa-chevron-down","text-xs"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"h-64","relative"],["baseChart","",3,"chartClick","data","options","type"],[3,"value"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-50","inset-0","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-indigo-100","sm:mx-0","sm:h-10","sm:w-10"],[1,"fas","fa-envelope","text-indigo-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"],["id","modal-title",1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"text-sm","text-gray-500"],[1,"font-bold"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-indigo-600","text-base","font-medium","text-white","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"a",2),e.nrm(3,"i",3),e.EFF(4," Retour vers Management "),e.k0s()(),e.j41(5,"h2",4),e.EFF(6,"Historique des demandes de paiement cr\xe9\xe9es"),e.k0s(),e.DNE(7,k,15,12,"div",5),e.j41(8,"div",6)(9,"nav",7)(10,"button",8),e.bIt("click",function(){return r.activeTab="history"}),e.EFF(11," Historique "),e.k0s(),e.j41(12,"button",8),e.bIt("click",function(){return r.activeTab="chart"}),e.EFF(13," Graphique "),e.k0s()()(),e.DNE(14,F,4,0,"div",9)(15,T,3,1,"div",10)(16,L,3,2,"div",11)(17,V,24,2,"div",12),e.k0s()),2&n&&(e.R7$(7),e.Y8G("ngIf",!r.loading&&!r.errorMessage),e.R7$(3),e.AVh("border-indigo-500","history"===r.activeTab)("text-indigo-600","history"===r.activeTab)("border-transparent","history"!==r.activeTab)("text-gray-500","history"!==r.activeTab),e.R7$(2),e.AVh("border-indigo-500","chart"===r.activeTab)("text-indigo-600","chart"===r.activeTab)("border-transparent","chart"!==r.activeTab)("text-gray-500","chart"!==r.activeTab),e.R7$(2),e.Y8G("ngIf",r.loading),e.R7$(),e.Y8G("ngIf",r.errorMessage),e.R7$(),e.Y8G("ngIf",!r.loading&&!r.errorMessage),e.R7$(),e.Y8G("ngIf",r.showConfirmModal))},dependencies:[u.MD,u.YU,u.Sq,u.bT,u.oe,u.vh,m.YN,m.xH,m.y7,m.me,m.wz,m.BC,m.vS,p.iI,p.Wk,E.j9],encapsulation:2})}return a})()}}]);